<!DOCTYPE html>
<html lang="en-US">
<head>
<link href="../favicon.ico" type="image/x-icon" rel="shortcut icon"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="description" content="Lua4z is a binary distribution of the Lua programming language, with extensions, for z/OS"/>
<meta name="keywords" content="Lua, z/OS"/>
<title>Lua4z: lfs</title>
<link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
  <a href="http://lua4z.com"><img src="../lua4z-logo.png"/></a>
  <div id="product_name">Lua4z</div>
  <div id="product_description">A binary distribution of Lua for z/OS, with batteries</div>
</div> <!-- id="product" -->

<div id="main">
<!-- Menu -->
<div id="navigation">
<ul>
<li><a href="../index.html">Welcome</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
      <li><a href="../modules/ispf.html"><span class='lua4z-only' title='Lua4z-only extension'>ispf</span></a></li>
      <li><a href="../modules/ispf.lmmlist.html"><span class='lua4z-only' title='Lua4z-only extension'>ispf.lmmlist</span></a></li>
      <li><a href="../modules/bit32.html"><span class='module-std' title='Lua standard library'>bit32</span></a></li>
      <li><a href="../modules/coroutine.html"><span class='module-std' title='Lua standard library'>coroutine</span></a></li>
      <li><a href="../modules/debug.html"><span class='module-std' title='Lua standard library'>debug</span></a></li>
      <li><a href="../modules/global.html"><span class='module-std' title='Lua standard library'>global</span></a></li>
      <li><a href="../modules/iconv.html"><span class='module-ext title='Lua extension'>iconv</span></a></li>
      <li><a href="../modules/io.html"><span class='module-std' title='Lua standard library'>io</span></a></li>
      <li><span class='module-ext title='Lua extension'><strong>lfs</strong></span>
   <ul>
     <li><a href="#Functions">Functions</a></li>
</ul>
  </li>
      <li><a href="../modules/lpeg.html"><span class='module-ext title='Lua extension'>lpeg</span></a></li>
      <li><a href="../modules/math.html"><span class='module-std' title='Lua standard library'>math</span></a></li>
      <li><a href="../modules/os.html"><span class='module-std' title='Lua standard library'>os</span></a></li>
      <li><a href="../modules/package.html"><span class='module-std' title='Lua standard library'>package</span></a></li>
      <li><a href="../modules/string.html"><span class='module-std' title='Lua standard library'>string</span></a></li>
      <li><a href="../modules/table.html"><span class='module-std' title='Lua standard library'>table</span></a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
      <li><a href="../manual/introduction.md.html"><span >Introduction</span></a></li>
      <li><a href="../manual/install.md.html"><span >Installing</span></a></li>
      <li><a href="../manual/using.md.html"><span >Running Lua programs on z/OS</span></a></li>
      <li><a href="../manual/syntax.md.html"><span >Complete syntax of Lua</span></a></li>
      <li><a href="../manual/extensions.md.html"><span >Extensions included with Lua4z</span></a></li>
      <li><a href="../manual/rexx.md.html"><span >Lua for REXX developers</span></a></li>
      <li><a href="../manual/support.md.html"><span >Support</span></a></li>
      <li><a href="../manual/version.md.html"><span >Version history</span></a></li>
      <li><a href="../manual/license.md.html"><span >Software license agreement</span></a></li>
      <li><a href="../manual/contact.md.html"><span >Contact</span></a></li>
      <li><a href="../manual/links.md.html"><span >Links</span></a></li>
      <li><a href="../manual/credits.md.html"><span >Credits</span></a></li>
      <li><a href="../manual/trademarks.md.html"><span >Trademarks</span></a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
      <li><a href="../examples/fileio.lua.html"><span >fileio.lua</span></a></li>
      <li><a href="../examples/hello.lua.html"><span >hello.lua</span></a></li>
      <li><a href="../examples/iconvs.lua.html"><span >iconvs.lua</span></a></li>
      <li><a href="../examples/ivp.lua.html"><span >ivp.lua</span></a></li>
      <li><a href="../examples/ksds.lua.html"><span >ksds.lua</span></a></li>
      <li><a href="../examples/luapath.lua.html"><span >luapath.lua</span></a></li>
      <li><a href="../examples/paths.lua.html"><span >paths.lua</span></a></li>
      <li><a href="../examples/pdsdir.lua.html"><span >pdsdir.lua</span></a></li>
      <li><a href="../examples/threads.lua.html"><span >threads.lua</span></a></li>
</ul>
</div>
<div id="content">
<h1>Module <code>lfs</code></h1>
<p>LuaFileSystem.</p>
<p> An extension library that complements the standard library functions related to file systems.
 For more information, see the original <a href="http://www.keplerproject.org/luafilesystem/">LuaFileSystem documentation</a>.</p>

<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#attributes">attributes (filepath, aname)</a></td>
	<td class="summary">Returns a table with the file attributes corresponding to filepath (or nil
 followed by an error message in case of error).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#chdir">chdir (path)</a></td>
	<td class="summary">Changes the current working directory to the given path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#lock_dir">lock_dir (path, seconds_stale)</a></td>
	<td class="summary">Creates a lockfile (called lockfile.lfs) in path if it does not exist and
 returns the lock.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#currentdir">currentdir ()</a></td>
	<td class="summary">Returns a string with the current working directory or nil plus an error
 string.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#dir">dir (path)</a></td>
	<td class="summary">Lua iterator over the entries of a given directory.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#lock">lock (filehandle, mode, start, length)</a></td>
	<td class="summary">Locks a file or a part of it.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#mkdir">mkdir (dirname)</a></td>
	<td class="summary">Creates a new directory.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#rmdir">rmdir (dirname)</a></td>
	<td class="summary">Removes an existing directory.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#setmode">setmode (file, mode)</a></td>
	<td class="summary">Sets the writing mode for a file.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#symlinkattributes">symlinkattributes (filepath, aname)</a></td>
	<td class="summary">Identical to lfs.attributes except that it obtains information about the link
 itself (not the file it refers to).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#touch">touch (filepath, atime, mtime)</a></td>
	<td class="summary">Set access and modification times of a file.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#unlock">unlock (filehandle, start, length)</a></td>
	<td class="summary">Unlocks a file or a part of it.</td>
	</tr>
</table>

    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "attributes"></a>
    <strong>attributes (filepath, aname)</strong>
    </dt>
    <dd>

<p>Returns a table with the file attributes corresponding to filepath (or nil
 followed by an error message in case of error).  If the second optional
 argument is given, then only the value of the named attribute is returned
 (this use is equivalent to lfs.attributes(filepath).aname, but the table is
 not created and only one attribute is retrieved from the O.S.). The
 attributes are described as follows; attribute mode is a string, all the
 others are numbers, and the time related attributes use the same time
 reference of os.time:</p>

<ul>
    <li>dev: on Unix systems, this represents the device that the inode resides on.
    On Windows systems, represents the drive number of the disk containing
    the file</li>
    <li>ino: on Unix systems, this represents the inode number. On Windows systems
    this has no meaning</li>
    <li>mode: string representing the associated protection mode (the values could
    be file, directory, link, socket, named pipe, char device, block
    device or other)</li>
    <li>nlink: number of hard links to the file</li>
    <li>uid: user-id of owner (Unix only, always 0 on Windows)</li>
    <li>gid: group-id of owner (Unix only, always 0 on Windows)</li>
    <li>rdev: on Unix systems, represents the device type, for special file inodes.
    On Windows systems represents the same as dev</li>
    <li>access: time of last access</li>
    <li>modification: time of last data modification</li>
    <li>change: time of last file status change</li>
    <li>size: file size, in bytes</li>
    <li>blocks: block allocated for file; (Unix only)</li>
    <li>blksize: optimal file system I/O blocksize; (Unix only)
    This function uses stat internally thus if the given filepath is a symbolic
    link, it is followed (if it points to another link the chain is followed
    recursively) and the information is about the file it refers to. To obtain
    information about the link itself, see function lfs.symlinkattributes.</li>
</ul>


    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">filepath</span>



        </li>
        <li><span class="parameter">aname</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "chdir"></a>
    <strong>chdir (path)</strong>
    </dt>
    <dd>
    Changes the current working directory to the given path.
 Returns true in case of success or nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "lock_dir"></a>
    <strong>lock_dir (path, seconds_stale)</strong>
    </dt>
    <dd>
    Creates a lockfile (called lockfile.lfs) in path if it does not exist and
 returns the lock.  If the lock already exists checks it it's stale, using the
 second parameter (default for the second parameter is INT_MAX, which in
 practice means the lock will never be stale. To free the the lock call
 lock:free().
 In case of any errors it returns nil and the error message. In particular,
 if the lock exists and is not stale it returns the "File exists" message.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>



        </li>
        <li><span class="parameter">seconds_stale</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "currentdir"></a>
    <strong>currentdir ()</strong>
    </dt>
    <dd>
    Returns a string with the current working directory or nil plus an error
 string.

    </ul>
    </ul>






</dd>
    <dt>
    <a name = "dir"></a>
    <strong>dir (path)</strong>
    </dt>
    <dd>
    Lua iterator over the entries of a given directory.  Each time the iterator is
 called with dir_obj it returns a directory entry's name as a string, or nil
 if there are no more entries. You can also iterate by calling <code>dir_obj:next()</code>,
 and explicitly close the directory before the iteration finished with
 <code>dir_obj:close()</code>. Raises an error if path is not a directory.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "lock"></a>
    <strong>lock (filehandle, mode, start, length)</strong>
    </dt>
    <dd>
    Locks a file or a part of it.  This function works on open files; the file
 handle should be specified as the first argument. The string mode could be
 either r (for a read/shared lock) or w (for a write/exclusive lock). The
 optional arguments start and length can be used to specify a starting point
 and its length; both should be numbers.
 Returns true if the operation was successful; in case of error, it returns
 nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">filehandle</span>



        </li>
        <li><span class="parameter">mode</span>



        </li>
        <li><span class="parameter">start</span>



        </li>
        <li><span class="parameter">length</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "mkdir"></a>
    <strong>mkdir (dirname)</strong>
    </dt>
    <dd>
    Creates a new directory.  The argument is the name of the new directory.
 Returns true if the operation was successful; in case of error, it returns
 nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dirname</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "rmdir"></a>
    <strong>rmdir (dirname)</strong>
    </dt>
    <dd>
    Removes an existing directory.  The argument is the name of the directory.
 Returns true if the operation was successful; in case of error, it returns
 nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dirname</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "setmode"></a>
    <strong>setmode (file, mode)</strong>
    </dt>
    <dd>
    Sets the writing mode for a file.  The mode string can be either binary or
 text. Returns the previous mode string for the file. This function is only
 available in Windows, so you may want to make sure that lfs.setmode exists
 before using it.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">file</span>



        </li>
        <li><span class="parameter">mode</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "symlinkattributes"></a>
    <strong>symlinkattributes (filepath, aname)</strong>
    </dt>
    <dd>
    Identical to lfs.attributes except that it obtains information about the link
 itself (not the file it refers to).  This function is not available in Windows
 so you may want to make sure that lfs.symlinkattributes exists before using
 it.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">filepath</span>



        </li>
        <li><span class="parameter">aname</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "touch"></a>
    <strong>touch (filepath, atime, mtime)</strong>
    </dt>
    <dd>
    Set access and modification times of a file.  This function is a bind to utime
 function. The first argument is the filename, the second argument (atime) is
 the access time, and the third argument (mtime) is the modification time.
 Both times are provided in seconds (which should be generated with Lua
 standard function os.time). If the modification time is omitted, the access
 time provided is used; if both times are omitted, the current time is used.
 Returns true if the operation was successful; in case of error, it returns
 nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">filepath</span>



        </li>
        <li><span class="parameter">atime</span>



        </li>
        <li><span class="parameter">mtime</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "unlock"></a>
    <strong>unlock (filehandle, start, length)</strong>
    </dt>
    <dd>
    Unlocks a file or a part of it.  This function works on open files; the file
 handle should be specified as the first argument. The optional arguments
 start and length can be used to specify a starting point and its length; both
 should be numbers.
 Returns true if the operation was successful; in case of error, it returns
 nil plus an error string.

    </ul>
    </ul>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">filehandle</span>



        </li>
        <li><span class="parameter">start</span>



        </li>
        <li><span class="parameter">length</span>



        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
</div> <!-- id="container" -->
<div id="footer">
generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a>
</div> <!-- id="footer" -->
</body>
</html>
